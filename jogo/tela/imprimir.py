import curses
from time import sleep

formas = (
    "‚ñ≤‚ñº‚óÄ‚ñ∂‚ó¢‚ó£‚ó•‚ó§‚ñ≥‚ñΩ‚óø‚ó∫‚óπ‚ó∏‚ñ¥‚ñæ‚óÇ‚ñ∏‚ñµ‚ñø‚óÉ‚ñπ‚óÅ‚ñ∑‚óÖ‚ñª‚ó¨‚üÅ‚ßã‚ßä‚äø‚àÜ‚àá‚ó≠‚óÆ‚ß©‚ß®‚åî‚üê‚óá‚óÜ‚óà‚¨ñ‚¨ó‚¨ò‚¨ô‚¨†‚¨°‚éî‚ãÑ‚óä‚ß´‚¨¢‚¨£‚ñ∞‚ñ™‚óº‚ñÆ‚óæ‚ñó‚ññ‚ñ†‚àé‚ñÉ‚ñÑ‚ñÖ‚ñÜ‚ñá"
    "‚ñà‚ñå‚ñê‚ñç‚ñé‚ñâ‚ñä‚ñã‚ùò‚ùô‚ùö‚ñÄ‚ñò‚ñù‚ñô‚ñö‚ñõ‚ñú‚ñü‚ñû‚ñë‚ñí‚ñì‚ñÇ‚ñÅ‚ñ¨‚ñî‚ñ´‚ñØ‚ñ≠‚ñ±‚óΩ‚ñ°‚óª‚ñ¢‚äû‚ä°‚äü‚ä†‚ñ£‚ñ§‚ñ•‚ñ¶‚¨ö‚ñß‚ñ®‚ñ©‚¨ì‚óß‚¨í‚ó®‚ó©‚ó™‚¨î‚¨ï‚ùè‚ùê‚ùë‚ùí‚ßà‚ó∞‚ó±‚ó≥‚ó≤‚ó´‚ßá‚ßÖ‚ßÑ‚çÅ‚çÇ‚ü°‚ßâ"
    "‚ö¨‚óã‚ö™‚óå‚óç‚óé‚óØ‚ùç‚óâ‚¶æ‚äô‚¶ø‚äú‚äñ‚äò‚äö‚äõ‚äù‚óè‚ö´‚¶Å‚óê‚óë‚óí‚óì‚óî‚óï‚¶∂‚¶∏‚óµ‚ó¥‚ó∂‚ó∑‚äï‚äó‚¶á‚¶à‚¶â‚¶ä‚ù®‚ù©‚∏®‚∏©‚óñ‚óó‚ù™‚ù´‚ùÆ‚ùØ‚ù¨‚ù≠‚ù∞‚ù±‚äè‚äê‚äë‚äí‚óò‚óô‚óö‚óõ‚óú‚óù‚óû‚óü‚ó†‚ó°‚ãí‚ãì‚ãê‚ãë"
    "‚•∞‚ï∞‚ïÆ‚ï≠‚ïØ‚åí‚•ø‚•æ‚•Ω‚•º‚•ä‚•ã‚•å‚•ç‚•é‚•ê‚•ë‚•è‚úï‚åì‚ó¶‚ùñ‚úñ‚úö‚úú‚ßì‚ßó‚ßë‚ßí‚ßñ_‚öä‚ï¥‚ïº‚ïæ-‚Äì‚éØ‚Äî‚Äï‚ï∂‚ï∫‚ï∏‚îÄ‚îÅ‚îÑ‚îÖ‚îà‚îâ‚ïå‚ïç‚ïê‚â£‚â°"
    "‚ò∞‚ò±‚ò≤‚ò≥‚ò¥‚òµ‚ò∂‚ò∑‚ïµ‚ï∑‚ïπ‚ïª‚îÇ‚ñï‚ñè‚îÉ‚îÜ‚îá‚îä‚ïé‚îã‚ïø‚ïΩ‚åû‚åü‚åú‚åù‚åä‚åã‚åà‚åâ‚åã‚îå‚îç‚îé‚îè‚îê‚îë‚îí‚îì‚îî‚îï‚îñ‚îó‚îò‚îô‚îö‚îõ‚îú‚îù‚îû‚îü‚î†‚î°‚î¢‚î£‚î§‚î•‚î¶‚îß‚î®‚î©‚î™‚î´‚î¨‚î≠‚îÆ‚î≥"
    "‚î¥‚îµ‚î∂‚î∑‚î∏‚îπ‚î∫‚îª‚îº‚îΩ‚îæ‚îø‚ïÄ‚ïÅ‚ïÇ‚ïÉ‚ïÑ‚ïÖ‚ïÜ‚ïá‚ïà‚ïâ‚ïä‚ïã‚ïè‚ïë‚ïî‚ïí‚ïì‚ïï‚ïñ‚ïó‚ïö‚ïò‚ïô‚ïõ‚ïú‚ïù‚ïû‚ïü‚ï†‚ï°‚ï¢‚ï£‚ï§‚ï•‚ï¶‚ïß‚ï®‚ï©‚ï™‚ï´‚ï¨êÇÄêÇÅêÇÇêÇÉêÇÑêÇÖêÇÜêÇáêÇàêÇâêÇäêÇãêÇå"
    "êÇçêÇéêÇèêÇêêÇëêÇíêÇìêÇîêÇïêÇñêÇóêÇòêÇôêÇöêÇõêÇúêÇùêÇûêÇüêÇ†êÇ°êÇ¢êÇ£êÇ§êÇ•êÇ¶êÇßêÇ®êÇ©êÇ™êÇ´êÇ¨êÇ≠êÇÆêÇØêÇ∞êÇ±êÇ≤êÇ≥êÇ¥êÇµêÇ∂êÇ∑êÇ∏êÇπêÇ∫êÇªêÇºêÇΩêÇæ"
    "êÇøêÉÄêÉÅêÉÇêÉÉêÉÑêÉÖêÉÜêÉáêÉàêÉâêÉäêÉãêÉåêÉçêÉéêÉèêÉêêÉëêÉíêÉìêÉîêÉïêÉñêÉóêÉòêÉôêÉöêÉõêÉúêÉùêÉûêÉüêÉ†êÉ°êÉ¢êÉ£êÉ§êÉ•êÉ¶êÉßêÉ®"
    "êÉ©êÉ™êÉ´êÉ¨êÉ≠êÉÆêÉØêÉ∞êÉ±êÉ≤êÉ≥êÉ¥êÉµêÉ∂êÉ∑êÉ∏êÉπêÉ∫ùÜΩùÜæùÜøùáÄüåÄüåÅüåÇüåÉüåÑüåÖüåÜüåáüåàüåâüåäüåãüååüåçüåéüåèüåêüåëüåíüåìüåîüåïüåñüåó"
    "üåòüåôüåöüåõüåúüåùüåûüåüüå†üå°üå¢üå£üå§üå•üå¶üåßüå®üå©üå™üå´üå¨üå≠üåÆüåØüå∞üå±üå≤üå≥üå¥üåµüå∂üå∑üå∏üåπüå∫üåªüåºüåΩüåæüåøüçÄüçÅüçÇüçÉüçÑüçÖüçÜ"
    "üçáüçàüçâüçäüçãüçåüççüçéüçèüçêüçëüçíüçìüçîüçïüçñüçóüçòüçôüçöüçõüçúüçùüçûüçüüç†üç°üç¢üç£üç§üç•üç¶üçßüç®üç©üç™üç´üç¨üç≠üçÆüçØüç∞üç±üç≤üç≥üç¥üçµ"
    "üç∂üç∑üç∏üçπüç∫üçªüçºüçΩüçæüçøüéÄüéÅüéÇüéÉüéÑüéÖüéÜüéáüéàüéâüéäüéãüéåüéçüééüéèüéêüéëüéíüéìüéîüéïüéñüéóüéòüéôüéöüéõüéúüéùüéûüéüüé†üé°üé¢üé£üé§üé•üé¶"
    "üéßüé®üé©üé™üé´üé¨üé≠üéÆüéØüé∞üé±üé≤üé≥üé¥üéµüé∂üé∑üé∏üéπüé∫üéªüéºüéΩüéæüéøüèÄüèÅüèÇüèÉüèÑüèÖüèÜüèáüèàüèâüèäüèãüèåüèçüèéüèèüèêüèëüèíüèìüèîüèï"
    "üèñüèóüèòüèôüèöüèõüèúüèùüèûüèüüè†üè°üè¢üè£üè§üè•üè¶üèßüè®üè©üè™üè´üè¨üè≠üèÆüèØüè∞üè±üè≤üè≥üè¥üèµüè∂üè∑üè∏üèπüè∫üèªüèºüèΩüèæüèøüêÄüêÅüêÇ"
    "üêÉüêÑüêÖüêÜüêáüêàüêâüêäüêãüêåüêçüêéüêèüêêüêëüêíüêìüêîüêïüêñüêóüêòüêôüêöüêõüêúüêùüêûüêüüê†üê°üê¢üê£üê§üê•üê¶üêßüê®üê©üê™üê´üê¨üê≠üêÆüêØüê∞"
    "üê±üê≤üê≥üê¥üêµüê∂üê∑üê∏üêπüê∫üêªüêºüêΩüêæüêøüëÄüëÅüëÇüëÉüëÑüëÖüëÜüëáüëàüëâüëäüëãüëåüëçüëéüëèüëêüëëüëíüëìüëîüëïüëñüëóüëòüëôüëöüëõüëúüëùüëûüëüüë†üë°"
    "üë¢üë£üë§üë•üë¶üëßüë®üë©üë™üë´üë¨üë≠üëÆüëØüë∞üë±üë≤üë≥üë¥üëµüë∂üë∑üë∏üëπüë∫üëªüëºüëΩüëæüëøüíÄüíÅüíÇüíÉüíÑüíÖüíÜüíáüíàüíâüíäüíãüíåüíçüíéüíèüíê"
    "üíëüííüíìüíîüíïüíñüíóüíòüíôüíöüíõüíúüíùüíûüíüüí†üí°üí¢üí£üí§üí•üí¶üíßüí®üí©üí™üí´üí¨üí≠üíÆüíØüí∞üí±üí≤üí≥üí¥üíµüí∂üí∑üí∏üíπüí∫üíªüíº"
    "üíΩüíæüíøüìÄüìÅüìÇüìÉüìÑüìÖüìÜüìáüìàüìâüìäüìãüìåüìçüìéüìèüìêüìëüìíüììüìîüìïüìñüìóüìòüìôüìöüìõüìúüìùüìûüìüüì†üì°üì¢üì£üì§üì•üì¶üìßüì®üì©üì™"
    "üì´üì¨üì≠üìÆüìØüì∞üì±üì≤üì≥üì¥üìµüì∂üì∑üì∏üìπüì∫üìªüìºüìΩüìæüìøüîÄüîÅüîÇüîÉüîÑüîÖüîÜüîáüîàüîâüîäüîãüîåüîçüîéüîèüîêüîëüîíüîìüîîüîïüîñüîóüîòüîôüîö"
    "üîõüîúüîùüîûüîüüî†üî°üî¢üî£üî§üî•üî¶üîßüî®üî©üî™üî´üî¨üî≠üîÆüîØüî∞üî±üî≤üî≥üî¥üîµüî∂üî∑üî∏üîπüî∫üîªüîºüîΩüîæüîøüïÄüïÅüïÇüïÉüïÑüïÖüïÜüïáüïàüïâüïä"
    "üïãüïåüïçüïéüïèüïêüïëüïíüïìüïîüïïüïñüïóüïòüïôüïöüïõüïúüïùüïûüïüüï†üï°üï¢üï£üï§üï•üï¶üïßüï®üï©üï™üï´üï¨üï≠üïÆüïØüï∞üï±üï≤üï≥üï¥üïµüï∂üï∑üï∏üïπüï∫"
    "üïªüïºüïΩüïæüïøüñÄüñÅüñÇüñÉüñÑüñÖüñÜüñáüñàüñâüñäüñãüñåüñçüñéüñèüñêüñëüñíüñìüñîüñïüññüñóüñòüñôüñöüñõüñúüñùüñûüñüüñ†üñ°üñ¢üñ£üñ§üñ•üñ¶üñßüñ®"
    "üñ©üñ™üñ´üñ¨üñ≠üñÆüñØüñ∞üñ±üñ≤üñ≥üñ¥üñµüñ∂üñ∑üñ∏üñπüñ∫üñªüñºüñΩüñæüñøüóÄüóÅüóÇüóÉüóÑüóÖüóÜüóáüóàüóâüóäüóãüóåüóçüóéüóèüóêüóëüóíüóìüóîüóïüóñüóóüóòüóôüóö"
    "üóõüóúüóùüóûüóüüó†üó°üó¢üó£üó§üó•üó¶üóßüó®üó©üó™üó´üó¨üó≠üóÆüóØüó∞üó±üó≤üó≥üó¥üóµüó∂üó∑üó∏üóπüó∫üóªüóºüóΩüóæüóøüòÄüòÅüòÇüòÉüòÑüòÖüòÜüòá"
    "üòàüòâüòäüòãüòåüòçüòéüòèüòêüòëüòíüòìüòîüòïüòñüòóüòòüòôüòöüòõüòúüòùüòûüòüüò†üò°üò¢üò£üò§üò•üò¶üòßüò®üò©üò™üò´üò¨üò≠üòÆüòØüò∞üò±üò≤üò≥üò¥üòµüò∂üò∑üò∏"
    "üòπüò∫üòªüòºüòΩüòæüòøüôÄüôÅüôÇüôÉüôÑüôÖüôÜüôáüôàüôâüôäüôãüôåüôçüôéüôèüôêüôëüôíüôìüôîüôïüôñüôóüôòüôôüôöüôõüôúüôùüôûüôüüô†üô°üô¢üô£üô§üô•üô¶üôß"
    "üô®üô©üô™üô´üô¨üô≠üôÆüôØüô∞üô±üô≤üô≥üô¥üôµüô∂üô∑üô∏üôπüô∫üôªüôºüôΩüôæüôøüöÄüöÅüöÇüöÉüöÑüöÖüöÜüöáüöàüöâüöäüöãüöåüöçüöéüöèüöêüöëüöíüöìüöîüöïüöñüöó"
    "üöòüöôüööüöõüöúüöùüöûüöüüö†üö°üö¢üö£üö§üö•üö¶üößüö®üö©üö™üö´üö¨üö≠üöÆüöØüö∞üö±üö≤üö≥üö¥üöµüö∂üö∑üö∏üöπüö∫üöªüöºüöΩüöæüöøüõÄüõÅüõÇüõÉüõÑüõÖüõÜüõáüõàüõâüõäüõã"
    "üõåüõçüõéüõèüõêüõëüõíüõìüõîüõïüõñüõóüõ¥üõµüõ∂üõ∑üõ∏üõπüõ∫üõªüõºüûØüû∞üû±üû≤üû≥üû¥üûµüû∂üû∑üû∏üûπüû∫üûªüûºüûΩüûæüûøü§êü§ëü§íü§ìü§îü§ïü§ñü§óü§òü§ôü§ö"
    "ü§õü§úü§ùü§ûü§üü§†ü§°ü§¢ü§£ü§§ü§•ü§¶ü§ßü§®ü§©ü§™ü§´ü§¨ü§≠ü§Æü§Øü§∞ü§±ü§≤ü§≥ü§¥ü§µü§∂ü§∑ü§∏ü§πü§∫ü§ªü§ºü§Ωü§æü•Äü•Åü•Çü•Éü•Ñü•Öü•Üü•áü•àü•âü•äü•ãü•å"
    "ü•êü•ëü•íü•ìü•îü•ïü•ñü•óü•òü•ôü•öü•õü•úü•ùü•ûü•üü•†ü•°ü•¢ü•£ü•§ü••ü•¶ü•ßü•®ü•©ü•™ü•´ü¶Äü¶Åü¶Çü¶Éü¶Ñü¶Öü¶Üü¶áü¶àü¶âü¶äü¶ãü¶åü¶çü¶éü¶èü¶êü¶ë"
    "ü¶íü¶ìü¶îü¶ïü¶ñü¶óü™êü™ëü™íü™ìü™îü™ïü™ñü™óü™òü™ôü™öü™õü™úü™ùü™ûü™üü™†ü™°ü™¢ü™£ü™§ü™•ü™¶ü™ßü™®ü™∞ü™±ü™≤ü™≥ü™¥ü™µü™∂ü´Äü´Åü´Çü´êü´ëü´íü´ì"
    "ü´îü´ïü´ñ"
)


def formatar_status(personagem):
    """Fun√ß√£o que arruma os caracters para a magia, vida e stamina."""
    nome, vida = personagem.nome, personagem.status["vida"]
    magia, stamina = personagem.status["magia"], personagem.status["stamina"]
    texto = f"{nome} [{personagem.classe}]: "
    porcentagem = magia  # caso a magia aumentar, fazer o calculo da porcentagem
    blocos_com_barras = _formatar_barras(magia, 100)
    texto += f"{blocos_com_barras} {porcentagem:3d}% "
    porcentagem = int((vida * 100) / personagem.vida_maxima)
    blocos_com_barras = _formatar_barras(vida, personagem.vida_maxima, True)
    texto += f"{blocos_com_barras} {porcentagem:3d}%  "
    blocos_com_barras = _formatar_barras(stamina, 100)
    porcentagem = (
        stamina  # caso a stamina aumentar, fazer o calculo da porcentagem
    )
    return texto + f"{blocos_com_barras} {porcentagem:3d}%"


def _formatar_barras(atributo, vida_maxima, vida=False):
    """Fun√ß√£o que cria as barras de magia, vida e stamina."""
    quantidade_blocos = 10 if vida else 5
    porcentagem = int(atributo / vida_maxima * quantidade_blocos)
    blocos = formas[53] * porcentagem
    blocos += (quantidade_blocos - len(blocos)) * formas[48]
    return f"{formas[191]}{blocos}{formas[192]}"


cores = {
    x: y
    for y, x in enumerate(
        ["verde", "cyan", "vermelho", "magenta", "amarelo"], 1
    )
}


def colorir(cor: str) -> int:
    """Fun√ß√£o que retorna um n√∫mero da cor correspondente."""
    return cores[cor]


class Imprimir:
    _tela = curses.newwin(20, 80, 4, 0)
    _tela2 = curses.newwin(4, 80)
    _tela2.nodelay(True)
    _tela2.box()
    _tela2.refresh()

    def imprimir(self, texto: str, cor: str = False):
        """M√©todo que digita o texto na tela debaixo."""
        if bool(cor):
            self._tela.addstr(texto, curses.color_pair(colorir(cor)))
        else:
            self._tela.addstr(texto)
        self._tela.refresh()

    def imprimir_combate(self, texto, local):
        """M√©todo que imprime o texto na tela de cima com uma caixa quadrada."""
        self._tela2.addstr(local, 2, texto)  # linhas, colunas
        self._tela2.box()
        self._tela2.refresh()

    def limpar_tela(self):
        """M√©todo que limpa a tela de baixo."""
        self._tela.erase()
        self._tela.refresh()

    def limpar_tela2(self):
        """M√©todo que limpa a tela de cima com uma caixa quadrada em volta."""
        self._tela2.erase()
        self._tela2.box()
        self._tela2.refresh()

    def obter_caracter(self):
        """M√©todo que obtem um caracter do usu√°rio."""
        return self._tela2.getch()

    def obter_string(self):
        """M√©todo que obtem uma frase do usu√°rio."""
        return self._tela.getstr().decode()

    def sem_delay(self):
        """M√©todo que tira o delay."""
        self._tela2.nodelay(True)

    def com_delay(self):
        """M√©todo que poim o delay."""
        self._tela2.nodelay(False)


tela = Imprimir()


def efeito_digitando(texto: str, dormir: float = 0.04):
    """Fun√ß√£o que imprime na tela uma mensagem parecendo que est√° digitando."""
    for a in texto:
        tela.imprimir(a)
        sleep(dormir)
    tela.imprimir("\n")
